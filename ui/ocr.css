/* ==========================================================================
   EDIP OCR / Lasso Workbench Styles
   File: src/components/ocr.css
   ========================================================================== */

/* ---- Reset & Base ------------------------------------------------------ */
*,
*::before,
*::after { box-sizing: border-box; }

html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
}

:root{
  --border: #e5e7eb;     /* gray-200 */
  --muted: #6b7280;      /* gray-500 */
  --panel: #ffffff;      /* white */
  --primary: #2563eb;    /* blue-600 */
  --primary-700:#1d4ed8; /* blue-700 */
  --accent: #6366f1;     /* indigo-500 */
}

body{
  color:#111827;                         /* gray-900 */
  background:#ffffff;                    /* white */
  font:14px/1.45 system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue",
       Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* ---- App Layout -------------------------------------------------------- */
.workbench{
  display:flex; flex-direction:column;
  height:100vh; gap:.75rem; padding:.75rem;
  background:#fff;
}

.section-title{ font-weight:600; margin:.25rem 0 .5rem; }
.muted{ color:var(--muted); font-size:12px; }
.spacer{ flex:1; }

/* ---- Toolbar ----------------------------------------------------------- */
.wb-toolbar{
  display:flex; align-items:center; gap:8px;
  padding:8px 12px; background:#fff; border:1px solid var(--border); border-radius:10px;
}

.wb-toolbar .input{
  flex:1; min-width:280px;
  padding:.48rem .6rem; border:1px solid var(--border); border-radius:8px; background:#fff;
}

.btn{
  display:inline-flex; align-items:center; gap:.35rem;
  padding:.44rem .72rem; border:1px solid var(--border); border-radius:8px;
  background:#fff; cursor:pointer; transition:background .15s, border-color .15s;
}
.btn:hover{ background:#f9fafb; }
.btn.toggle.active{ background:#f3f4f6; border-color:#d1d5db; }

.primary{
  background:var(--primary); border-color:var(--primary); color:#fff;
}
.primary:hover{ background:var(--primary-700); border-color:var(--primary-700); }

/* ---- Split (Left 30% / Right 70%) ------------------------------------- */
.wb-split{ display:flex; gap:12px; align-items:stretch; height:calc(100vh - 110px); }
.wb-left{
  flex:0 0 30%;
  display:flex; flex-direction:column;
  min-width:240px; overflow:auto;
  background:#fff; border:1px solid var(--border); border-radius:10px; padding:10px;
}
.wb-right{
  flex:1 1 70%;
  display:flex; flex-direction:column; overflow:auto;
  background:#fff; border:1px solid var(--border); border-radius:10px; padding:10px;
}

/* ---- PDF Stage + Overlay ---------------------------------------------- */
.pdf-stage{
  position:relative; overflow:auto; background:#fff;
  border:1px solid var(--border); border-radius:10px; padding:8px; min-height:320px;
}
.pdf-stage canvas{
  display:block; background:#fff; border-radius:6px;
}

/* overlay layer sized/aligned by PdfEditCanvas */
.overlay{
  position:absolute; inset:0; background:transparent; pointer-events:auto;
}

/* OCR token boxes (orange) */
.overlay .tok{
  position:absolute;
  border:1px solid rgba(255,165,0,.55);
  background:rgba(255,165,0,.10);
  pointer-events:none;
}

/* Active edit rectangle (pink) */
.overlay .pink{
  position:absolute;
  border:2px solid #ec4899;
  background:rgba(236,72,153,.14);
  box-shadow:0 0 0 1px rgba(236,72,153,.2) inset;
  pointer-events:none; /* hit-testing computed in JS */
}
.overlay .pink.live{ border-style:dashed; }

/* Resize handles (only shown on edge hover / resizing) */
.overlay .handle{
  position:absolute; width:8px; height:8px; border-radius:3px;
  background:rgba(236,72,153,.95);
  box-shadow:0 0 0 2px #fff inset, 0 0 0 1px rgba(236,72,153,.8);
  pointer-events:none;
}

/* Page toolbar inside right panel */
.toolbar-inline{
  display:flex; align-items:center; gap:8px; padding:6px 2px 8px 2px;
}
.page-indicator{ font-size:12px; color:#374151; }

/* ---- Tables ------------------------------------------------------------ */
table{ width:100%; border-collapse:collapse; }
thead th{
  text-align:left; padding:8px;
  background:#f8fafc; border-bottom:1px solid var(--border);
}
tbody td{ padding:6px 8px; border-bottom:1px solid #f1f5f9; }
tr:hover td{ background:#f9fafb; }
code{ font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono"; }

/* Flash cue when a value is updated from OCR */
.flash{ animation:flashfill 900ms ease-out; }
@keyframes flashfill{
  0%{ background:#e6ffed; } 100%{ background:transparent; }
}

/* ---- Last OCR preview -------------------------------------------------- */
.last-ocr{ display:flex; gap:12px; align-items:flex-start; margin:10px 2px 0; }
.last-ocr img{
  max-width:220px; border:1px solid var(--border); border-radius:6px; background:#fff;
}
.last-ocr .caption .title{ font-weight:600; margin-bottom:4px; }
.last-ocr .caption pre{
  margin:0; padding:6px 8px; background:#f8fafc; border:1px solid var(--border);
  border-radius:6px; white-space:pre-wrap;
}

/* ---- Buttons (generic) ------------------------------------------------- */
button{
  font:inherit; color:inherit; background:#fff;
  border:1px solid var(--border); padding:.44rem .72rem; border-radius:8px; cursor:pointer;
  transition:background .15s, border-color .15s;
}
button:hover{ background:#f3f4f6; }
button:disabled{ opacity:.55; cursor:not-allowed; }

/* ---- Helpers ----------------------------------------------------------- */
.placeholder{ padding:12px; color:var(--muted); font-size:14px; }
.hint{ margin-top:8px; color:var(--muted); font-size:12px; }

/* ---- Modal (kept for future bind dialogs) ----------------------------- */
.modal-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:flex; align-items:flex-start; justify-content:center;
  padding-top:72px; z-index:100000;
}
.modal-card{
  background:#fff; width:min(1100px,96vw); max-height:86vh; overflow:auto;
  border-radius:12px; padding:14px; box-shadow:0 10px 30px rgba(0,0,0,.30);
  border:1px solid var(--border);
}

/* ---- Responsive -------------------------------------------------------- */
@media (max-width: 1024px){
  .wb-split{ flex-direction:column; height:auto; }
  .wb-left, .wb-right{ flex:1 1 auto; }
  .wb-toolbar .input{ min-width:200px; }
}
